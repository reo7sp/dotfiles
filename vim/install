#!/bin/bash
set -e

can-exec() {
  which "$1" 2>/dev/null 1>/dev/null
}


mkdir -p ~/.vim/{bundle,backup,tmp,undo,sessions,spell,view}

cp vimrc ~/.vimrc
mkdir -p ~/.config/nvim
cp nvim/init.vim ~/.config/nvim/init.vim
cp neovintageousrc ~/.neovintageousrc
cp ideavimrc ~/.ideavimrc
cp ideavimrc ~/.ideavimrc
mkdir -p ~/.config/nvim/after/{syntax,ftplugin}
cp after/syntax/vim.vim ~/.config/nvim/after/syntax/vim.vim
cp after/ftplugin/jinja.vim ~/.config/nvim/after/ftplugin/jinja.vim

curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
vim +PlugInstall +qa
if can-exec nvim; then
  nvim +PlugInstall +qa
fi
